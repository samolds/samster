{% extends 'base.html' %}

{% block content %}
<div class="body-narrow">
<div class="content">
  <div class="inline">
    <form class="right" action="/blog/all" method="post">{% csrf_token %}
        {{ form.non_field_errors }}
        <table>
        <tr>
        <td><small>{{ form.tag.label_tag }} {{ form.tag }}</small></td>
        <td rowspan=2><input type="submit" value="Filter" /></td>
        </tr>
        <tr>
        <td><small>{{ form.date.label_tag }} {{ form.date }}</small></td>
        </tr>
        </table>
    </form>
    <h1 class="left">All Blog Posts</h1>
    <div class="clear"></div>
  </div>
</div>

<div class="content inbetween"></div>

{% for post in posts %}
<div class="content">
<table>
  <tr>
    <td class="textleft tdtitle" rowspan=2><h2><a href="/blog/post/{{ post.pk }}">{{ post.title }}</a></h2></td>
    <td class="textright"><small>{{ post.creation_date }}</small></td>
  </tr>
  {% if not post.creation_date.ctime == post.updated_date.ctime %}
  <tr>
    <td class="textright"><small>{{ post.updated_date }}</small></td>
  </tr>
  {% endif %}
</table>

<p class="textright"><small>
{% for tag_data in post.tags.values %}
<a href="/blog/filter/{{ tag_data.tag }}">{{ tag_data.tag }}</a>
{% endfor %}
</small></p>

<div class="content">
<p>
{{ post.content|slice:":300"|safe }}...
<div class="clear"></div>
</p>
</div>
</div>

<div class="content inbetween"></div>
{% endfor %}

<div class="content">
</div>
</div>

{% endblock %}
